<mat-card>
    <mat-card-title>Student Registration</mat-card-title>
    <mat-card-content>
<form [formGroup]="registerForm" (ngSubmit)="onRegister()">
    <mat-card-subtitle>Primary Information(Required)</mat-card-subtitle>
    <div class="row">
        <div class="col-md-6">
            <mat-form-field>
                <input matInput formControlName="firstName" placeholder="First Name*" [(ngModel)]="data.firstName">
                <mat-error *ngIf="FirstName.hasError('required') && (FirstName.touched || FirstName.dirty)">First Name is required</mat-error>
              </mat-form-field>
        </div>
        <div class="col-md-6">
            <mat-form-field>
                <input matInput placeholder="Last Name*" formControlName="lastName" [(ngModel)]="data.lastName">
                <mat-error *ngIf="LastName.hasError('required') && (LastName.touched || LastName.dirty)">Last Name is required</mat-error>
              </mat-form-field>
        </div>
    </div>
    
  
    
    <div class="row">
        <div class="col-md-6">
            <mat-form-field>
                <input matInput placeholder="Email*" formControlName="email" [(ngModel)]="data.email">
                <mat-error *ngIf="Email.hasError('required') && (Email.touched || Email.dirty)">Email is required</mat-error>
                <mat-error *ngIf="Email.hasError('email') && (Email.touched || Email.dirty)">Please enter valid email address</mat-error>
              </mat-form-field>
        </div>
        <div class="col-md-6">
            <mat-form-field>
                <input matInput placeholder="Mobile Number*" formControlName="mobileNo" [(ngModel)]="data.mobileNo">
                <mat-error *ngIf="MobileNo.hasError('required') && (MobileNo.touched || MobileNo.dirty)">Mobile Number is required</mat-error>
                <mat-error *ngIf="MobileNo.hasError('pattern') && (MobileNo.touched || MobileNo.dirty)">Please enter a valid mobile number</mat-error>
              </mat-form-field>
        </div>
    </div>
    
  
    
  <div class="row">
    <div class="col-md-6">
        <mat-form-field>
            <input matInput type="password" placeholder="Password*" formControlName="password" [(ngModel)]="data.password">
            <mat-error *ngIf="Password.hasError('required') && (Password.touched || Password.dirty)">Password is required</mat-error>
    <mat-error *ngIf="Password.hasError('pattern') && (Password.touched || Password.dirty)">Password should be atleast 8 characters with atleast 1 special character,uppercase,lowercase letter and number</mat-error>
          </mat-form-field>
    </div>
    <div class="col-md-6">
        <mat-form-field>
            <input matInput type="password" placeholder="Confirm Password*" formControlName="confirmPassword" >
            <mat-error *ngIf="ConfirmPassword.hasError('required') && (ConfirmPassword.touched || ConfirmPassword.dirty)">Confirm Password is required</mat-error>
           <mat-error *ngIf="registerForm.hasError('passwordMismatch','confirmPassword')">Does not Match With Password</mat-error>           
          </mat-form-field>
    </div>
  </div>
  <mat-card-subtitle> Secondary Information</mat-card-subtitle>
  <div class="row">
    <div class="col-md-6">
        <mat-form-field>
            <input matInput [matDatepicker]="picker" formControlName="dob" placeholder="Date of Birth" [max]="maxDate" [(ngModel)]="data.dob">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker ></mat-datepicker>
          </mat-form-field>
    </div>
    <div class="col-md-6">
        <mat-label>Gender</mat-label>
        <mat-radio-group formControlName="gender" [(ngModel)]="data.gender">
            
            <mat-radio-button *ngFor="let option of gender" value="{{option}}">{{option}}</mat-radio-button>
           
          </mat-radio-group>
    </div>

  </div>
  <div class="row" formArrayName="addresses" [(ngModel)]="data.addresses">
    <div *ngFor="let address of addressControls; let i = index" [formGroupName]="i">
  <div class="row">
    <div class="col-md-4">
      <mat-form-field>
        <mat-select disableRipple formControlName="country" placeholder="Country{{i+1}}" (valueChange)="selectCountry($event)">
          <mat-option [value]="country.id"
          [attr.data-country-name]="country.name" *ngFor="let country of countries">{{ country.name }}</mat-option>
        </mat-select>
    </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field>
        <mat-select placeholder="State {{i+1}}" formControlName="state" disableRipple
        formControlName="state"
        (valueChange)="selectState($event)">
        <mat-option
        *ngFor="let state of states"
        [value]="state.id"
        [attr.data-state-name]="state.statename"
        >{{ state.statename }}
      </mat-option>

        </mat-select>
    </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field>
        <mat-label>City</mat-label>
        <input (keyup)="autochange(i);selectCity(i)" matInput formControlName="city" [matAutocomplete]="auto">
        <!-- <mat-select placeholder="City {{i+1}}" formControlName="city" disableRipple> -->
          <mat-autocomplete #auto>
        <mat-option
        *ngFor="let city of filteroptions | async"
        [value]="city.cityName"
        [attr.data-state-name]="city.cityName"
        >{{city.cityName}}
      </mat-option></mat-autocomplete>
      <!-- </mat-select> -->

        
    </mat-form-field>
    </div>
    
  

  </div>
  <div class="row">
    <div class="col-md-4">
      <mat-form-field>
        <input matInput formControlName="zipcode" placeholder="Zipcode {{i+1}}">
      </mat-form-field>
    </div>
    <div class="col-md-6">
      <mat-form-field>
        <input type="textarea" matInput formControlName="address" placeholder="Address {{i+1}}">
      </mat-form-field>
    </div>
    <div class="col-md-2">
      <button class="btn btn-danger"  type="button" (click)="deleteAddress(i)"><span class="fs-5 fw-bold">Delete</span></button>
    </div>
  </div>
    </div></div>
    <button mat-raised-button color="primary"  type="button" (click)="addAddress()"><span class="fs-5 fw-bold">Add New Address</span></button>
  <div class="row"><div class="col-md-6">
    <mat-checkbox formControlName="policyAgreement" [(ngModel)]="data.policyAgreement">I Accept the Terms And Conditions</mat-checkbox></div>
  
 <div class="col-md-6">
  <button mat-raised-button color="primary" type="submit" [disabled]="registerForm.invalid">Submit</button></div>
  </div>

  </form>
  
</mat-card-content>
<mat-card-footer>

</mat-card-footer>
</mat-card>
